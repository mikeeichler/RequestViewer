<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Request Viewer</title>
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/core.js"></script>-->
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js"></script>-->
    <!-- <script type="text/javascript" src="https://rv.mikee.site/static/index.js"></script> -->
    <script>
      var DAPROPS = ""
      var DeviceAtlas = {cacheType: "none",
      onPropertiesUpdate: function(properties, propertiesAsString) {
        DAPROPS = propertiesAsString;
        // expects function - default undefined, pass function to capture properties updates
        // properties will be object containing all properties detected by DeviceAtlas client-side
        // propertiesAsString would have properties as string acceptable by DeviceAtlas API
    },}


    function twelve13() {
    const isIPhone12 = window.innerWidth === 390 && window.innerHeight === 844 && window.devicePixelRatio === 3;
    const isIPhone13 = window.innerWidth === 390 && window.innerHeight === 844 && window.devicePixelRatio === 3.125;

    if (isIPhone12) {
        return "This is an iPhone 12";
    } else if (isIPhone13) {
        return "This is an iPhone 13";
    } else {
        return "This is not an iPhone 12 or iPhone 13";
    }
}

function jsonToTable(j) {
    let table = "<table><tr><th>Header</th><th>Value</th></tr>";
  for (const k in j) {
    table += `<tr><td>${k}</td><td>${j[k]}</td></tr>`;
    if (k == "timestamp") {
      timestamp = j[k];
    }
  }
  table += '</table>'
  return table;
}

function load(device) {
  // console.log(DeviceAtlas.)
      const videoObject = new Map();
      var video = document.createElement('video');
      if (video.canPlayType('video/mp4; codecs="ap4h.2, mp4a.40.2"')) {
          videoObject.set('PR422', true)
      } else {
        videoObject.set('PR422', false)
      }
      videoObject.set('innerHeight', window.innerHeight)
      videoObject.set('screenHeight', screen.height)
      videoObject.set('screenAvailHeight', screen.availHeight)
      videoObject.set('devicePixelRatio', window.devicePixelRatio)
        
    fetch("/api", {
        method: 'GET',
        headers: {
            DAPROPS,
            'Accept': 'application/json',
            'X-PR422': videoObject.get('PR422'),
            'X-PR4444': videoObject.get('PR4444'),
            'X-WEBGL-HASH': videoObject.get('webglHash'),
            'X-ACTUAL-DEVICE': device,
            'X-INNER-HEIGHT': videoObject.get('innerHeight'),
            'X-SCREEN-HEIGHT': videoObject.get('screenHeight'),
            'X-SCREEN-AVAIL-HEIGHT': videoObject.get('screenAvailHeight'),
            'X-DPR': videoObject.get('devicePixelRatio'),
            'X-MESSAGE': document.getElementById("message").value
        }},)
        .then(() => console.log("done"));
    // disabling access to DA data on this page
    // .then((response) => response.json())
    // .then((data) => {
    //     console.log(data)
    //     document.getElementById("message").value = ''
    //     // window.location.reload(true)
    //     document.getElementById("content").style.visibility = "visible";
    //     document.getElementById("content").innerHTML = jsonToTable(data);
    //     // document.write(jsonToTable(data))
    // })
    // const tw13 = twelve13();
    // console.log(tw13)
};

// done
    </script>
    <script type="text/javascript" src="https://cs.deviceatlas-cdn.com/dacs.js" async></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <input type="button" value="Home" onClick="window.location.reload(true)">
    <input type="text" id="message">
    <div id="content">
  </br>
    <input type="button" value="iPhone 14" onClick="load(this.value)">
    <input type="button" value="iPhone 14 Pro" onClick="load(this.value)">
    <input type="button" value="iPhone 14 Pro Max" onClick="load(this.value)">
    <input type="button" value="iPhone 14 Plus" onClick="load(this.value)">
    <input type="button" value="iPhone SE (3rd generation)" onClick="load(this.value)">
  </br>
    <input type="button" value="iPhone 13" onClick="load(this.value)">
    <input type="button" value="iPhone 13 mini" onClick="load(this.value)">
    <input type="button" value="iPhone 13 Pro" onClick="load(this.value)">
    <input type="button" value="iPhone 13 Pro Max" onClick="load(this.value)">
  </br>
    <input type="button" value="iPhone 12" onClick="load(this.value)">
    <input type="button" value="iPhone 12 Pro" onClick="load(this.value)">
    <input type="button" value="iPhone 12 Pro Max" onClick="load(this.value)">
    <input type="button" value="iPhone 12 Mini" onClick="load(this.value)">
    <input type="button" value="iPhone SE (2nd generation)" onClick="load(this.value)">
  </br>
    <input type="button" value="iPhone 11" onClick="load(this.value)">
    <input type="button" value="iPhone 11 Pro" onClick="load(this.value)">
    <input type="button" value="iPhone 11 Pro Max" onClick="load(this.value)">
    <input type="button" value="iPhone XR" onClick="load(this.value)">
    <input type="button" value="iPhone XS" onClick="load(this.value)">
    <input type="button" value="iPhone XS Max" onClick="load(this.value)">
  </br>
    <input type="button" value="iPhone X" onClick="load(this.value)">
    <input type="button" value="iPhone 8" onClick="load(this.value)">
    <input type="button" value="iPhone 8 Plus" onClick="load(this.value)">
  </br>
    <input type="button" value="iPad Pro (12.9 6th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (11 4th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (12.9 5th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (11 3rd Gen)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (12.9 4th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (11 2nd Gen)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (12.9 3rd Gen)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (11)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (12.9 2nd Gen)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (10.5)" onClick="load(this.value)">
    <input type="button" value="iPad Pro (9.7)" onClick="load(this.value)">
    <input type="button" value="iPad Pro" onClick="load(this.value)">
  </br>
    <input type="button" value="iPad mini 6" onClick="load(this.value)">
    <input type="button" value="iPad mini 5" onClick="load(this.value)">
  </br>
    <input type="button" value="iPad Air 5" onClick="load(this.value)">
    <input type="button" value="iPad Air 4" onClick="load(this.value)">
    <input type="button" value="iPad Air 3" onClick="load(this.value)">
  </br>
    <input type="button" value="iPad (10th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad (9th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad (8th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad (7th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad (6th Gen)" onClick="load(this.value)">
    <input type="button" value="iPad (5th Gen)" onClick="load(this.value)">
  </br>
    <input type="button" value="Something Else" onClick="load(this.value)">
    <table>
    {{range $name, $value := .}}
        <tr><td>{{$name}}</td><td>{{$value}}</td></tr>
    {{end}}
    </table>
  </div>
  <div style="color:white;">proven.lol/7287be</div>
  </body>
</html>

